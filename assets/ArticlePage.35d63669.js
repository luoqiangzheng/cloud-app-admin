import{t as X,d as Y,F as G,G as Z,H as ee,B as te}from"./element-plus.b7bae97a.js";import{_ as ae}from"./CTable.vuevuetypescriptsetuptruelang.da9a4f0b.js";import{m as H,r as c,f as m,w as oe,d as ne,a6 as le,o as h,c as U,X as n,Q as l,V as w,W as _,u as t,P as D,U as L,J as se,R as N,S as M,T as j,M as re,a9 as ie,n as q,a as B}from"./@vue.868258c7.js";import{j as ue,k as pe}from"./@element-plus.cf00268d.js";import{_ as ce,s as me,u as de,a as fe,b as he}from"./ArticleEditDialog.vuevuetypescriptsetuptruelang.501a43e5.js";import{u as J}from"./vue-i18n.8110a5da.js";import"./lodash-es.082cdea4.js";import"./@vueuse.b31bd3d5.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.6e4093f3.js";import"./axios.68af02ab.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.cba15af0.js";import"./index.bf48c991.js";import"./vue-echarts.3b6c88e9.js";import"./resize-detector.4e96b72b.js";import"./echarts.3adaecf4.js";import"./tslib.60310f1a.js";import"./zrender.46c0e42b.js";import"./pinia.90b1a562.js";import"./vue-demi.65474690.js";import"./xe-utils.3d60b059.js";/* empty css                     */import"./vxe-table.2ca82d51.js";import"./qs.d2aa2b80.js";import"./side-channel.38d98334.js";import"./get-intrinsic.89e72507.js";import"./has-symbols.caae0f97.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.4b19860c.js";import"./object-inspect.621f328c.js";import"./js-cookie.31874410.js";import"./vue-router.c009eb29.js";import"./nprogress.54513b29.js";import"./yup.0bed65b0.js";import"./nanoclone.7d3cb5fe.js";import"./lodash.489bb805.js";import"./property-expr.48609aa3.js";import"./toposort.5e0934c4.js";import"./@intlify.f00429e5.js";const ve=H({__name:"SearchFilter",props:{options:{type:Array,required:!0},model:{type:Object,required:!0},loading:{type:Boolean,default:!1},searchDisabled:{type:Boolean,default:!1},resetDisabled:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0}},emits:["search","reset"],setup(i,{emit:d}){const v=i,u=c(!1),b=c(0),y=c(!0),E=c(0),R=300,S=c(),s=c({}),{t:k}=J(),a=m(()=>{let e=Math.floor(b.value/R)||3;return e>4&&(e=4),e<1&&(e=1),e}),P=m(()=>v.showExpand&&x.value.length>a.value),z=m(()=>({span:24/a.value})),r=m(()=>v.options.filter(e=>!e.hidden)),O=m(()=>{let e=[],o=z.value.span;if(r.value.length<a.value-1)o=(a.value-r.value.length%a.value)*24/a.value,e=[...r.value];else for(let p=0;p<r.value.length;p++){const T=r.value[p];if(e.push(T),e.length>=a.value-1)break}return e.push({name:"search",scopedSlot:"search",colSpan:{span:o}}),e}),x=m(()=>{const e=(a.value-r.value.length%a.value)*24/a.value;return[...r.value,{name:"search",scopedSlot:"search",colSpan:{span:e}}]}),F=m(()=>u.value||!v.showExpand?x:O.value),g=c();function I(e){d("search",e)}function f(){var e;(e=S.value)==null||e.submit()}function C(){$(),q(()=>{d("reset")})}function $(...e){S.value.resetFields(...e)}function V(){u.value=!u.value}function W(){!y.value||(y.value=!1,E.value=setTimeout(()=>{g.value&&(b.value=g.value.offsetWidth,y.value=!0)},300))}function A(){q(()=>{b.value=g.value.clientWidth}),window.addEventListener("resize",W,!1)}return oe(()=>v.model,e=>{s.value=e},{immediate:!0}),ne(()=>{A()}),le(()=>{}),(e,o)=>{const p=G,T=X,K=Y;return h(),U("div",{ref_key:"filterWrapRef",ref:g},[n(ce,re({ref_key:"form",ref:S},e.$attrs,{value:s.value,"onUpdate:value":o[0]||(o[0]=Q=>s.value=Q),options:t(F).value,layout:"inline","col-span":t(z),gutter:12,onSubmit:I,onKeyup:ie(f,["enter"])}),{search:l(()=>[n(T,null,{default:l(()=>[n(p,{type:"primary",icon:"search",loading:i.loading,disabled:i.searchDisabled,onClick:f},{default:l(()=>[w(_(t(k)("page.common.btn.search")),1)]),_:1},8,["loading","disabled"]),i.showReset?(h(),D(p,{key:0,type:"primary",icon:"brush",loading:i.loading,disabled:i.resetDisabled,onClick:C},{default:l(()=>[w(_(t(k)("page.common.btn.reset")),1)]),_:1},8,["loading","disabled"])):L("",!0)]),_:1}),se(e.$slots,"extraButtons",{loading:i.loading}),t(P)?(h(),U("a",{key:0,onClick:V},[w(_(u.value?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),N(n(K,null,{default:l(()=>[(h(),D(j(t(ue))))]),_:1},512),[[M,u.value]]),N(n(K,null,{default:l(()=>[(h(),D(j(t(pe))))]),_:1},512),[[M,!u.value]])])):L("",!0)]),_:3},16,["value","options","col-span","onKeyup"])],512)}}}),ge={class:"relative w-full"},_e={class:"p-[8px] absolute w-full"},be={class:"mx-3 mt-5"},ye={class:"float-right mt-2"},mt=H({__name:"ArticlePage",setup(i){const{t:d}=J(),v={title:"",content:"",type:""},{articleFilterOptions:u,articleColumns:b}=me(),y=c(v),E=m(()=>u.value),{loading:R,dataSource:S,ipagination:s,modalFormRef:k,loadData:a,handleSizeChange:P,handleCurrentChange:z,handleOpenAddDialog:r,handleOpenEditDialog:O,handleDelete:x,handleSearch:F,handleReset:g}=de(he);return(I,f)=>{const C=G,$=ve,V=Z,W=ae,A=ee,e=te;return h(),U("div",ge,[B("div",_e,[B("div",be,[n($,{model:y.value,options:t(E),"show-reset":!0,onReset:t(g),onSearch:t(F)},{extraButtons:l(()=>[n(C,{type:"primary",icon:"plus",onClick:t(r)},{default:l(()=>[B("span",null,_(t(d)("page.common.btn.add")),1)]),_:1},8,["onClick"])]),_:1},8,["model","options","onReset","onSearch"])]),N((h(),D(W,{"table-data":t(S),columns:t(b),align:"right","header-align":"right",stripe:"",style:{width:"100%"}},{actions:l(({scope:o})=>[n(C,{size:"small",onClick:p=>t(O)(o.row)},{default:l(()=>[w(_(t(d)("page.common.btn.edit")),1)]),_:2},1032,["onClick"]),n(V,{title:t(d)("page.common.btn.delete_popover"),onConfirm:p=>t(x)(o.row.id)},{reference:l(()=>[n(C,{size:"small",type:"danger"},{default:l(()=>[w(_(t(d)("page.common.btn.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["table-data","columns"])),[[e,t(R)]]),B("div",ye,[n(A,{currentPage:t(s).current,"onUpdate:currentPage":f[0]||(f[0]=o=>t(s).current=o),"page-size":t(s).pageSize,"onUpdate:page-size":f[1]||(f[1]=o=>t(s).pageSize=o),small:"","page-sizes":t(s).pageSizeOptions,background:!0,layout:"sizes, prev, pager, next",total:t(s).total,onSizeChange:t(P),onCurrentChange:t(z)},null,8,["currentPage","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])]),n(fe,{ref_key:"modalFormRef",ref:k,onClose:t(a)},null,8,["onClose"])])}}});export{mt as default};
